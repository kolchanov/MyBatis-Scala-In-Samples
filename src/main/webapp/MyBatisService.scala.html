<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>MyBatisService.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.mybatis_scala.service.mybatis

<span class="keyword">import</span> java.io.{BufferedReader,InputStreamReader,FileInputStream}
<span class="keyword">import</span> org.mybatis_scala.util.LogHelper
<span class="keyword">import</span> org.mybatis_scala.ApplicationContext
<span class="keyword">import</span> org.mybatis_scala.model.{GenreRecord, BookRecord, AuthorRecord, Genre, Book, Author}
<span class="keyword">import</span> org.apache.ibatis.session.{SqlSessionFactoryBuilder,SqlSession}
<span class="keyword">import</span> scala.collection.<span title="object scala.collection.JavaConversions">JavaConversions</span>._
<span class="keyword">import</span> scala.collection.mutable._

/**
* Trait that incapsulates all DAO operations
*/
<span class="keyword">trait</span> <a title="trait MyBatisDaoService extends java.lang.Object" id="9203">MyBatisDaoService</a> <span title="java.lang.Object">{</span>
	//* Get increment for sequence. Used in H2IDGenerator.
	<span class="keyword">def</span> <a title="(name: String)Int" id="13843">getSequenceIncremet</a> (<a title="String" id="21236">name</a>: <span title="String">String</span>) : <span title="Int">Int</span>
	
	//* get genre sequence nextval
	<span class="keyword">def</span> <a title="=&gt; Long" id="13844">getGenreSequenceNextVal</a> : <span title="Long">Long</span>
	
	//* get book sequence nextval
	<span class="keyword">def</span> <a title="=&gt; Long" id="13845">getBookSequenceNextVal</a> : <span title="Long">Long</span>

	//* get author sequence nextval
	<span class="keyword">def</span> <a title="=&gt; Long" id="13846">getAuthorSequenceNextVal</a> : <span title="Long">Long</span>
	
	
	//* Genre methods
	
	//* get GENRE row count 
	<span class="keyword">def</span> <a title="=&gt; Int" id="13847">getGenreCount</a>: <span title="Int">Int</span>
	//* save immutable genre to database
	<span class="keyword">def</span> <a title="(genre: org.mybatis_scala.model.Genre)Unit" id="13848">saveGenre</a> (<a title="org.mybatis_scala.model.Genre" id="21591">genre</a>: <a href="Genre.scala.html#9151" title="org.mybatis_scala.model.Genre">Genre</a>) : <span title="Unit">Unit</span>
	//* load immutable genre from database
	<span class="keyword">def</span> <a title="(id: Long)Option[org.mybatis_scala.model.Genre]" id="13849">loadGenreById</a> (<a title="Long" id="21592">id</a>: <span title="Long">Long</span>) : <span title="Option[org.mybatis_scala.model.Genre]">Option</span>[Genre]
	//* load immutable genre from database
	<span class="keyword">def</span> <a title="(name: String)List[org.mybatis_scala.model.Genre]" id="13850">loadGenreByName</a> (<a title="String" id="21593">name</a>: <span title="String">String</span>) : <span title="List[org.mybatis_scala.model.Genre]">List</span>[Genre]
	//* load mutable GenreRecord from Database
	<span class="keyword">def</span> <a title="(id: Long)Option[org.mybatis_scala.model.GenreRecord]" id="13851">loadGenreRecordById</a> (<a title="Long" id="21594">id</a>: <span title="Long">Long</span>) : <span title="Option[org.mybatis_scala.model.GenreRecord]">Option</span>[GenreRecord]
	//* update genre
	<span class="keyword">def</span> <a title="(genre: org.mybatis_scala.model.Genre)Unit" id="13852">updateGenre</a> (<a title="org.mybatis_scala.model.Genre" id="21595">genre</a>: <a href="Genre.scala.html#9151" title="org.mybatis_scala.model.Genre">Genre</a> ) : <span title="Unit">Unit</span>
	//* delete genre
	<span class="keyword">def</span> <a title="(genre: org.mybatis_scala.model.Genre)Unit" id="13853">deleteGenre</a> (<a title="org.mybatis_scala.model.Genre" id="21596">genre</a>: <a href="Genre.scala.html#9151" title="org.mybatis_scala.model.Genre">Genre</a>) : <span title="Unit">Unit</span>
	
	
	//* Book methods

	//* get BOOK row count 
	<span class="keyword">def</span> <a title="=&gt; Int" id="13854">getBookCount</a>: <span title="Int">Int</span>
	//* save immutable genre to database
	<span class="keyword">def</span> <a title="(book: org.mybatis_scala.model.Book)Unit" id="13855">saveBook</a> (<a title="org.mybatis_scala.model.Book" id="21597">book</a>: <a href="Book.scala.html#9143" title="org.mybatis_scala.model.Book">Book</a>) : <span title="Unit">Unit</span>	
	//* load mutable book from database by Id
	<span class="keyword">def</span> <a title="(id: Long)Option[org.mybatis_scala.model.BookRecord]" id="13856">loadBookById</a> (<a title="Long" id="21598">id</a>: <span title="Long">Long</span>) : <span title="Option[org.mybatis_scala.model.BookRecord]">Option</span>[BookRecord]
	//* lazy load mutable book from database
	<span class="keyword">def</span> <a title="(title: String)List[org.mybatis_scala.model.BookRecord]" id="13857">lazyLoadBookByTitle</a> (<a title="String" id="21599">title</a>: <span title="String">String</span>) : <span title="List[org.mybatis_scala.model.BookRecord]">List</span>[BookRecord]
	//* lazy load mutable book from database
	<span class="keyword">def</span> <a title="(authorId: Long)List[org.mybatis_scala.model.BookRecord]" id="13858">lazyLoadBookByAuthor</a> (<a title="Long" id="21600">authorId</a>: <span title="Long">Long</span>) : <span title="List[org.mybatis_scala.model.BookRecord]">List</span>[BookRecord]	
	//* update book
	<span class="keyword">def</span> <a title="(book: org.mybatis_scala.model.Book)Unit" id="13859">updateBook</a> (<a title="org.mybatis_scala.model.Book" id="21601">book</a>: <a href="Book.scala.html#9143" title="org.mybatis_scala.model.Book">Book</a>) : <span title="Unit">Unit</span>
	//* delete book
	<span class="keyword">def</span> <a title="(book: org.mybatis_scala.model.Book)Unit" id="13860">deleteBook</a> (<a title="org.mybatis_scala.model.Book" id="21602">book</a>: <a href="Book.scala.html#9143" title="org.mybatis_scala.model.Book">Book</a>) : <span title="Unit">Unit</span>
	
	
	//* Author methods
	//* get AUTHOR row count 
	<span class="keyword">def</span> <a title="=&gt; Int" id="13861">getAuthorCount</a>: <span title="Int">Int</span>
	//* save mutable author to database
	<span class="keyword">def</span> <a title="(author: org.mybatis_scala.model.AuthorRecord)Unit" id="13862">saveAuthorRecord</a> (<a title="org.mybatis_scala.model.AuthorRecord" id="21603">author</a>: <a href="Author.scala.html#9133" title="org.mybatis_scala.model.AuthorRecord">AuthorRecord</a>) : <span title="Unit">Unit</span>		
	//* save immutable author to database
	<span class="keyword">def</span> <a title="(author: org.mybatis_scala.model.Author)Unit" id="13863">saveAuthor</a> (<a title="org.mybatis_scala.model.Author" id="21604">author</a>: <a href="Author.scala.html#9134" title="org.mybatis_scala.model.Author">Author</a>) : <span title="Unit">Unit</span>	
	//* load author from database by id
	<span class="keyword">def</span> <a title="(id: Long)Option[org.mybatis_scala.model.AuthorRecord]" id="13864">loadAuthorById</a> (<a title="Long" id="21605">id</a>: <span title="Long">Long</span>) : <span title="Option[org.mybatis_scala.model.AuthorRecord]">Option</span>[AuthorRecord]
	//* lazy load author from database by id
	<span class="keyword">def</span> <a title="(name: String)List[org.mybatis_scala.model.AuthorRecord]" id="13865">lazyLoadAuthorByFirstName</a> (<a title="String" id="21606">name</a>: <span title="String">String</span>) : <span title="List[org.mybatis_scala.model.AuthorRecord]">List</span>[AuthorRecord]
	//* update author
	<span class="keyword">def</span> <a title="(author: org.mybatis_scala.model.Author)Unit" id="13866">updateAuthor</a> (<a title="org.mybatis_scala.model.Author" id="21607">author</a>: <a href="Author.scala.html#9134" title="org.mybatis_scala.model.Author">Author</a>) : <span title="Unit">Unit</span>
	//* delete cascade author
	<span class="keyword">def</span> <a title="(author: org.mybatis_scala.model.Author)Unit" id="13867">deleteCascadeAuthor</a> (<a title="org.mybatis_scala.model.Author" id="21608">author</a>: <a href="Author.scala.html#9134" title="org.mybatis_scala.model.Author">Author</a>) : <span title="Unit">Unit</span>	
	//* delete restrict author
	<span class="keyword">def</span> <a title="(author: org.mybatis_scala.model.Author)Unit" id="13868">deleteAuthor</a> (<a title="org.mybatis_scala.model.Author" id="21609">author</a>: <a href="Author.scala.html#9134" title="org.mybatis_scala.model.Author">Author</a>) : <span title="Unit">Unit</span>	
}

/**
* Default implementation of MyBatisDaoService trait
*/
<span class="keyword">object</span> <a title="object org.mybatis_scala.service.mybatis.MyBatisDaoService" id="9204">MyBatisDaoService</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#9203" title="org.mybatis_scala.service.mybatis.MyBatisDaoService">MyBatisDaoService</a> <span class="keyword">with</span> <a href="LogHelper.scala.html#9228" title="org.mybatis_scala.util.LogHelper">LogHelper</a> {
	
	// MyBatis file is in the classpath
	<span class="keyword">val</span> <a title="java.io.BufferedReader" id="14656">reader</a> = <span title="(x$1: java.io.Reader)java.io.BufferedReader" class="keyword">new</span> <span title="java.io.BufferedReader">BufferedReader</span>(<span title="java.io.InputStreamReader" class="keyword">new</span> <span title="java.io.InputStreamReader">InputStreamReader</span>(<span title="()java.lang.Class[_]">getClass</span>().<span title="(x$1: java.lang.String)java.io.InputStream">getResourceAsStream</span>(<span title="java.lang.String(&quot;/MyBatis.xml&quot;)" class="string">&quot;/MyBatis.xml&quot;</span>)))

	<span class="keyword">val</span> <a title="java.util.Properties" id="14658">props</a> = <a href="ApplicationContext.scala.html#9120" title="object org.mybatis_scala.ApplicationContext">ApplicationContext</a>.<a href="ApplicationContext.scala.html#9246" title="=&gt; java.util.Properties">getProperties</a>	
	<span class="keyword">val</span> <a title="org.apache.ibatis.session.SqlSessionFactory" id="14660">sqlMapper</a> = <span title="org.apache.ibatis.session.SqlSessionFactoryBuilder" class="keyword">new</span> <span title="org.apache.ibatis.session.SqlSessionFactoryBuilder">SqlSessionFactoryBuilder</span>().<span title="(x$1: java.io.Reader,x$2: java.util.Properties)org.apache.ibatis.session.SqlSessionFactory">build</span>(<a href="#14656" title="=&gt; java.io.BufferedReader">reader</a>,<a href="#14658" title="=&gt; java.util.Properties">props</a>)	

	/**
   * Execute instructions within a SQLSession with autocommit. 
   */
  <span class="keyword">def</span> <a title="[T](operation: (org.apache.ibatis.session.SqlSession) =&gt; T)T" id="14662">exec</a>[<a title="&gt;: Nothing &lt;: Any" id="14664">T</a>&lt;:Any](<a title="(org.apache.ibatis.session.SqlSession) =&gt; T" id="22538">operation</a>: SqlSession =&gt; T): <a href="#14664" title="T">T</a> = {	
		<span class="keyword">val</span> <a title="org.apache.ibatis.session.SqlSession" id="22597">session</a> = <a href="#14660" title="=&gt; org.apache.ibatis.session.SqlSessionFactory">sqlMapper</a>.<span title="(x$1: Boolean)org.apache.ibatis.session.SqlSession">openSession</span>(<span title="Boolean(true)" class="keyword">true</span>) 
		<span class="keyword">try</span> { 
		  <a href="#22538" title="(v1: org.apache.ibatis.session.SqlSession)T">operation</a>(<a href="#22597" title="org.apache.ibatis.session.SqlSession">session</a>)
		} <span class="keyword">finally</span> { 
		  <a href="#22597" title="org.apache.ibatis.session.SqlSession">session</a>.<span title="()Unit">close</span>()
		}	
  }
	
	//* Get one object from database
	<span class="keyword">def</span> <a title="[T](myBatisId: String)(obj: Any)T" id="14665">getOne</a> [<a title="&gt;: Nothing &lt;: Any" id="14667">T</a>] (<a title="String" id="22766">myBatisId</a> : <span title="String">String</span>) ( <a title="Any" id="22767">obj</a> : <span title="Any">Any</span>) : <a href="#14667" title="T">T</a> = <a href="#14662" title="(operation: (org.apache.ibatis.session.SqlSession) =&gt; T)T">exec</a>{ <a title="org.apache.ibatis.session.SqlSession" id="22772">s</a> =&gt;	<a href="#22772" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)java.lang.Object">selectOne</span> (<a href="#22766" title="String">myBatisId</a>,<a href="#22767" title="Any">obj</a>).<span title="[T0]T0">asInstanceOf</span><span title="T">[</span><a href="#14667" title="T">T</a>]}	
	// * Get Option [T] object from database
	<span class="keyword">def</span> <a title="[T](myBatisId: String)(obj: Any)Option[T]" id="14668">getOneOption</a>[<a title="&gt;: Nothing &lt;: Any" id="14670">T</a>] (<a title="String" id="22780">myBatisId</a> : <span title="String">String</span>) ( <a title="Any" id="22781">obj</a> : <span title="Any">Any</span>) : <span title="Option[T]">Option</span>[T] = {
		<span class="keyword">val</span> <a title="T" id="22783">res</a> = <a href="#14665" title="[T](myBatisId: String)(obj: Any)T">getOne</a><span title="(myBatisId: String)(obj: Any)T">[</span><a href="#14670" title="T">T</a>] (<a href="#22780" title="String">myBatisId</a>) (<a href="#22781" title="Any">obj</a>)
		<span title="Option[T]" class="keyword">if</span> (<a href="#22783" title="(x$1: Any)Boolean">res</a> != <span title="Null(null)" class="keyword">null</span>) <span title="(x: T)Some[T]">Some</span>(<a href="#22783" title="T">res</a>) <span class="keyword">else</span> <span title="object None">None</span>
	}	
	//* Get one object from database
	<span class="keyword">def</span> <a title="[T](myBatisId: String)T" id="14671">getOneObject</a> [<a title="&gt;: Nothing &lt;: Any" id="14673">T</a>] (<a title="String" id="22791">myBatisId</a> : <span title="String">String</span>) : <a href="#14673" title="T">T</a> = <a href="#14662" title="(operation: (org.apache.ibatis.session.SqlSession) =&gt; T)T">exec</a>{ <a title="org.apache.ibatis.session.SqlSession" id="22796">s</a> =&gt;	<a href="#22796" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String)java.lang.Object">selectOne</span> (<a href="#22791" title="String">myBatisId</a>).<span title="[T0]T0">asInstanceOf</span><span title="T">[</span><a href="#14673" title="T">T</a>]}
	//* get list from database
	<span class="keyword">def</span> <a title="[T](myBatisId: String)(obj: Any)List[T]" id="14674">getList</a> [<a title="&gt;: Nothing &lt;: Any" id="14676">T</a>] (<a title="String" id="22802">myBatisId</a> : <span title="String">String</span>) ( <a title="Any" id="22803">obj</a> : <span title="Any">Any</span>) : <span title="List[T]">List</span>[T] = {
		<span class="keyword">val</span> <a title="scala.collection.mutable.Buffer[T]" id="22805">res</a> : <span title="scala.collection.mutable.Buffer[T]">Buffer</span>[T] = <a href="#14662" title="(operation: (org.apache.ibatis.session.SqlSession) =&gt; scala.collection.mutable.Buffer[T])scala.collection.mutable.Buffer[T]">exec</a>{ <a title="org.apache.ibatis.session.SqlSession" id="22814">s</a> =&gt; <a href="#22814" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)java.util.List[_]">selectList</span> (<a href="#22802" title="String">myBatisId</a>,<a href="#22803" title="Any">obj</a>).<span title="[T0]T0">asInstanceOf</span><span title="(l: java.util.List[T])scala.collection.mutable.Buffer[T]">[</span>java.util.<span title="java.util.List[T]">List</span>[T]]}
		<a href="#22805" title="scala.collection.mutable.Buffer[T]">res</a>.<span title="=&gt; List[T]">toList</span>
	}
	
	
	//* insert object into database
	<span class="keyword">def</span> <a title="[T](myBatisId: String)(obj: T)Int" id="14677">insert</a> [<a title="&gt;: Nothing &lt;: Any" id="14679">T</a>] (<a title="String" id="22838">myBatisId</a> : <span title="String">String</span>) ( <a title="T" id="22839">obj</a> : <a href="#14679" title="T">T</a>) = <a href="#14662" title="(operation: (org.apache.ibatis.session.SqlSession) =&gt; Int)Int">exec</a>{ <a title="org.apache.ibatis.session.SqlSession" id="22845">s</a> =&gt;	<a href="#22845" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)Int">insert</span> (<a href="#22838" title="String">myBatisId</a>,<a href="#22839" title="T">obj</a>)}
	//* update object 
	<span class="keyword">def</span> <a title="[T](myBatisId: String)(obj: T)Int" id="14680">update</a> [<a title="&gt;: Nothing &lt;: Any" id="14682">T</a>] (<a title="String" id="22852">myBatisId</a> : <span title="String">String</span>) ( <a title="T" id="22853">obj</a> : <a href="#14682" title="T">T</a>) = <a href="#14662" title="(operation: (org.apache.ibatis.session.SqlSession) =&gt; Int)Int">exec</a>{ <a title="org.apache.ibatis.session.SqlSession" id="22859">s</a> =&gt;	<a href="#22859" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)Int">update</span> (<a href="#22852" title="String">myBatisId</a>,<a href="#22853" title="T">obj</a>)}
	//* delete object 
	<span class="keyword">def</span> <a title="[T](myBatisId: String)(obj: T)Int" id="14683">delete</a> [<a title="&gt;: Nothing &lt;: Any" id="14685">T</a>] (<a title="String" id="22866">myBatisId</a> : <span title="String">String</span>) ( <a title="T" id="22867">obj</a> : <a href="#14685" title="T">T</a>) = <a href="#14662" title="(operation: (org.apache.ibatis.session.SqlSession) =&gt; Int)Int">exec</a>{ <a title="org.apache.ibatis.session.SqlSession" id="22873">s</a> =&gt;	<a href="#22873" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)Int">delete</span> (<a href="#22866" title="String">myBatisId</a>,<a href="#22867" title="T">obj</a>)}	

	//* methods for id generators
	<span class="keyword">def</span> <a title="(name: String)Int" id="14686">getSequenceIncremet</a> (<a title="String" id="22880">name</a>: <span title="String">String</span>) : <span title="Int">Int</span> = <a href="#14665" title="[T](myBatisId: String)(obj: Any)T">getOne</a><span title="(myBatisId: String)(obj: Any)Int">[</span><span title="Int">Int</span>] (<span title="java.lang.String(&quot;selectSequenceIncrement&quot;)" class="string">&quot;selectSequenceIncrement&quot;</span>) (<a href="#22880" title="String">name</a>)
	<span class="keyword">def</span> <a title="=&gt; Long" id="14687">getGenreSequenceNextVal</a> : <span title="Long">Long</span> = <a href="#14671" title="[T](myBatisId: String)T">getOneObject</a><span title="(myBatisId: String)Long">[</span><span title="Long">Long</span>] (<span title="java.lang.String(&quot;genreNextVal&quot;)" class="string">&quot;genreNextVal&quot;</span>)
	<span class="keyword">def</span> <a title="=&gt; Long" id="14688">getBookSequenceNextVal</a> : <span title="Long">Long</span> = <a href="#14671" title="[T](myBatisId: String)T">getOneObject</a><span title="(myBatisId: String)Long">[</span><span title="Long">Long</span>] (<span title="java.lang.String(&quot;bookNextVal&quot;)" class="string">&quot;bookNextVal&quot;</span>)
	<span class="keyword">def</span> <a title="=&gt; Long" id="14689">getAuthorSequenceNextVal</a> : <span title="Long">Long</span> = <a href="#14671" title="[T](myBatisId: String)T">getOneObject</a><span title="(myBatisId: String)Long">[</span><span title="Long">Long</span>] (<span title="java.lang.String(&quot;authorNextVal&quot;)" class="string">&quot;authorNextVal&quot;</span>)


	//* Genre methods
	<span class="keyword">def</span> <a title="=&gt; Int" id="14690">getGenreCount</a>: <span title="Int">Int</span> = <a href="#14671" title="[T](myBatisId: String)T">getOneObject</a><span title="(myBatisId: String)Int">[</span><span title="Int">Int</span>] (<span title="java.lang.String(&quot;countGenre&quot;)" class="string">&quot;countGenre&quot;</span>)
	<span class="keyword">def</span> <a title="(genre: org.mybatis_scala.model.Genre)Unit" id="14691">saveGenre</a> (<a title="org.mybatis_scala.model.Genre" id="22896">genre</a>: <a href="Genre.scala.html#9151" title="org.mybatis_scala.model.Genre">Genre</a>) = <a href="#14677" title="[T](myBatisId: String)(obj: T)Int">insert</a> <span title="(myBatisId: String)(obj: org.mybatis_scala.model.Genre)Int">[</span><a href="Genre.scala.html#9151" title="org.mybatis_scala.model.Genre">Genre</a>] (<span title="java.lang.String(&quot;insertGenre&quot;)" class="string">&quot;insertGenre&quot;</span>) <span title="Unit">(</span><a href="#22896" title="org.mybatis_scala.model.Genre">genre</a>)
	<span class="keyword">def</span> <a title="(id: Long)Option[org.mybatis_scala.model.Genre]" id="14692">loadGenreById</a> (<a title="Long" id="22902">id</a>: <span title="Long">Long</span>) : <span title="Option[org.mybatis_scala.model.Genre]">Option</span>[Genre] = <a href="#14668" title="[T](myBatisId: String)(obj: Any)Option[T]">getOneOption</a><span title="(myBatisId: String)(obj: Any)Option[org.mybatis_scala.model.Genre]">[</span><a href="Genre.scala.html#9151" title="org.mybatis_scala.model.Genre">Genre</a>] (<span title="java.lang.String(&quot;selectGenreById&quot;)" class="string">&quot;selectGenreById&quot;</span>) (<a href="#22902" title="Long">id</a>)
	<span class="keyword">def</span> <a title="(name: String)List[org.mybatis_scala.model.Genre]" id="14693">loadGenreByName</a> (<a title="String" id="22906">name</a>: <span title="String">String</span>) : <span title="List[org.mybatis_scala.model.Genre]">List</span>[Genre] = <a href="#14674" title="[T](myBatisId: String)(obj: Any)List[T]">getList</a> <span title="(myBatisId: String)(obj: Any)List[org.mybatis_scala.model.Genre]">[</span><a href="Genre.scala.html#9151" title="org.mybatis_scala.model.Genre">Genre</a>] (<span title="java.lang.String(&quot;selectGenreByName&quot;)" class="string">&quot;selectGenreByName&quot;</span>) (<a href="#22906" title="String">name</a>)
	<span class="keyword">def</span> <a title="(id: Long)Option[org.mybatis_scala.model.GenreRecord]" id="14694">loadGenreRecordById</a> (<a title="Long" id="22910">id</a>: <span title="Long">Long</span>) : <span title="Option[org.mybatis_scala.model.GenreRecord]">Option</span>[GenreRecord] = <a href="#14668" title="[T](myBatisId: String)(obj: Any)Option[T]">getOneOption</a><span title="(myBatisId: String)(obj: Any)Option[org.mybatis_scala.model.GenreRecord]">[</span><a href="Genre.scala.html#9150" title="org.mybatis_scala.model.GenreRecord">GenreRecord</a>] (<span title="java.lang.String(&quot;selectGenreRecordById&quot;)" class="string">&quot;selectGenreRecordById&quot;</span>) (<a href="#22910" title="Long">id</a>)
	<span class="keyword">def</span> <a title="(genre: org.mybatis_scala.model.Genre)Unit" id="14695">updateGenre</a> (<a title="org.mybatis_scala.model.Genre" id="22914">genre</a>: <a href="Genre.scala.html#9151" title="org.mybatis_scala.model.Genre">Genre</a>) : <span title="Unit">Unit</span> = <a href="#14680" title="[T](myBatisId: String)(obj: T)Int">update</a> <span title="(myBatisId: String)(obj: org.mybatis_scala.model.Genre)Int">[</span><a href="Genre.scala.html#9151" title="org.mybatis_scala.model.Genre">Genre</a>] (<span title="java.lang.String(&quot;updateGenre&quot;)" class="string">&quot;updateGenre&quot;</span>) <span title="Unit">(</span><a href="#22914" title="org.mybatis_scala.model.Genre">genre</a>)
	<span class="keyword">def</span> <a title="(genre: org.mybatis_scala.model.Genre)Unit" id="14696">deleteGenre</a> (<a title="org.mybatis_scala.model.Genre" id="22919">genre</a>: <a href="Genre.scala.html#9151" title="org.mybatis_scala.model.Genre">Genre</a>) : <span title="Unit">Unit</span> = <a href="#14683" title="[T](myBatisId: String)(obj: T)Int">delete</a> <span title="(myBatisId: String)(obj: org.mybatis_scala.model.Genre)Int">[</span><a href="Genre.scala.html#9151" title="org.mybatis_scala.model.Genre">Genre</a>] (<span title="java.lang.String(&quot;deleteGenre&quot;)" class="string">&quot;deleteGenre&quot;</span>) <span title="Unit">(</span><a href="#22919" title="org.mybatis_scala.model.Genre">genre</a>)
	
	//* Book methods
	<span class="keyword">def</span> <a title="=&gt; Int" id="14697">getBookCount</a>: <span title="Int">Int</span> = <a href="#14671" title="[T](myBatisId: String)T">getOneObject</a><span title="(myBatisId: String)Int">[</span><span title="Int">Int</span>] (<span title="java.lang.String(&quot;countBook&quot;)" class="string">&quot;countBook&quot;</span>)	
	<span class="keyword">def</span> <a title="(book: org.mybatis_scala.model.Book)Unit" id="14698">saveBook</a> (<a title="org.mybatis_scala.model.Book" id="22927">book</a>: <a href="Book.scala.html#9143" title="org.mybatis_scala.model.Book">Book</a>) : <span title="Unit">Unit</span> = <a href="#14677" title="[T](myBatisId: String)(obj: T)Int">insert</a> <span title="(myBatisId: String)(obj: org.mybatis_scala.model.Book)Int">[</span><a href="Book.scala.html#9143" title="org.mybatis_scala.model.Book">Book</a>] (<span title="java.lang.String(&quot;insertBook&quot;)" class="string">&quot;insertBook&quot;</span>) <span title="Unit">(</span><a href="#22927" title="org.mybatis_scala.model.Book">book</a>)
	<span class="keyword">def</span> <a title="(id: Long)Option[org.mybatis_scala.model.BookRecord]" id="14699">loadBookById</a> (<a title="Long" id="22932">id</a>: <span title="Long">Long</span>) : <span title="Option[org.mybatis_scala.model.BookRecord]">Option</span>[BookRecord] = <a href="#14668" title="[T](myBatisId: String)(obj: Any)Option[T]">getOneOption</a><span title="(myBatisId: String)(obj: Any)Option[org.mybatis_scala.model.BookRecord]">[</span><a href="Book.scala.html#9142" title="org.mybatis_scala.model.BookRecord">BookRecord</a>] (<span title="java.lang.String(&quot;selectBookById&quot;)" class="string">&quot;selectBookById&quot;</span>) (<a href="#22932" title="Long">id</a>)
	<span class="keyword">def</span> <a title="(title: String)List[org.mybatis_scala.model.BookRecord]" id="14700">lazyLoadBookByTitle</a> (<a title="String" id="22936">title</a>: <span title="String">String</span>) : <span title="List[org.mybatis_scala.model.BookRecord]">List</span>[BookRecord] = <a href="#14674" title="[T](myBatisId: String)(obj: Any)List[T]">getList</a> <span title="(myBatisId: String)(obj: Any)List[org.mybatis_scala.model.BookRecord]">[</span><a href="Book.scala.html#9142" title="org.mybatis_scala.model.BookRecord">BookRecord</a>] (<span title="java.lang.String(&quot;lazySelectBookByTitle&quot;)" class="string">&quot;lazySelectBookByTitle&quot;</span>) (<a href="#22936" title="String">title</a>)	
	<span class="keyword">def</span> <a title="(authorId: Long)List[org.mybatis_scala.model.BookRecord]" id="14701">lazyLoadBookByAuthor</a> (<a title="Long" id="22940">authorId</a>: <span title="Long">Long</span>) : <span title="List[org.mybatis_scala.model.BookRecord]">List</span>[BookRecord]	=	<a href="#14674" title="[T](myBatisId: String)(obj: Any)List[T]">getList</a> <span title="(myBatisId: String)(obj: Any)List[org.mybatis_scala.model.BookRecord]">[</span><a href="Book.scala.html#9142" title="org.mybatis_scala.model.BookRecord">BookRecord</a>] (<span title="java.lang.String(&quot;selectBookByAuthor&quot;)" class="string">&quot;selectBookByAuthor&quot;</span>) (<a href="#22940" title="Long">authorId</a>)	
	<span class="keyword">def</span> <a title="(book: org.mybatis_scala.model.Book)Unit" id="14702">updateBook</a> (<a title="org.mybatis_scala.model.Book" id="22944">book</a>: <a href="Book.scala.html#9143" title="org.mybatis_scala.model.Book">Book</a>) : <span title="Unit">Unit</span> = <a href="#14680" title="[T](myBatisId: String)(obj: T)Int">update</a> <span title="(myBatisId: String)(obj: org.mybatis_scala.model.Book)Int">[</span><a href="Book.scala.html#9143" title="org.mybatis_scala.model.Book">Book</a>] (<span title="java.lang.String(&quot;updateBook&quot;)" class="string">&quot;updateBook&quot;</span>) <span title="Unit">(</span><a href="#22944" title="org.mybatis_scala.model.Book">book</a>)
	<span class="keyword">def</span> <a title="(book: org.mybatis_scala.model.Book)Unit" id="14703">deleteBook</a> (<a title="org.mybatis_scala.model.Book" id="22949">book</a>: <a href="Book.scala.html#9143" title="org.mybatis_scala.model.Book">Book</a>) : <span title="Unit">Unit</span> = <a href="#14683" title="[T](myBatisId: String)(obj: T)Int">delete</a> <span title="(myBatisId: String)(obj: org.mybatis_scala.model.Book)Int">[</span><a href="Book.scala.html#9143" title="org.mybatis_scala.model.Book">Book</a>] (<span title="java.lang.String(&quot;deleteBook&quot;)" class="string">&quot;deleteBook&quot;</span>) <span title="Unit">(</span><a href="#22949" title="org.mybatis_scala.model.Book">book</a>)

	//* Author methods
	<span class="keyword">def</span> <a title="=&gt; Int" id="14704">getAuthorCount</a>: <span title="Int">Int</span> = <a href="#14671" title="[T](myBatisId: String)T">getOneObject</a><span title="(myBatisId: String)Int">[</span><span title="Int">Int</span>] (<span title="java.lang.String(&quot;countAuthor&quot;)" class="string">&quot;countAuthor&quot;</span>)
	<span class="keyword">def</span> <a title="(author: org.mybatis_scala.model.AuthorRecord)Unit" id="14705">saveAuthorRecord</a> (<a title="org.mybatis_scala.model.AuthorRecord" id="22957">author</a>: <a href="Author.scala.html#9133" title="org.mybatis_scala.model.AuthorRecord">AuthorRecord</a>) : <span title="Unit">Unit</span> = <a href="#14677" title="[T](myBatisId: String)(obj: T)Int">insert</a> <span title="(myBatisId: String)(obj: org.mybatis_scala.model.AuthorRecord)Int">[</span><a href="Author.scala.html#9133" title="org.mybatis_scala.model.AuthorRecord">AuthorRecord</a>] (<span title="java.lang.String(&quot;insertAuthor&quot;)" class="string">&quot;insertAuthor&quot;</span>) <span title="Unit">(</span><a href="#22957" title="org.mybatis_scala.model.AuthorRecord">author</a>)
	<span class="keyword">def</span> <a title="(author: org.mybatis_scala.model.Author)Unit" id="14706">saveAuthor</a> (<a title="org.mybatis_scala.model.Author" id="22962">author</a>: <a href="Author.scala.html#9134" title="org.mybatis_scala.model.Author">Author</a>) : <span title="Unit">Unit</span> = <a href="#14662" title="(operation: (org.apache.ibatis.session.SqlSession) =&gt; Unit)Unit">exec</a> { <a title="org.apache.ibatis.session.SqlSession" id="22967">s</a> =&gt;
		<a href="#22967" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)Int">insert</span> (<span title="java.lang.String(&quot;insertAuthor&quot;)" class="string">&quot;insertAuthor&quot;</span>,<a href="#22962" title="org.mybatis_scala.model.Author">author</a>)		
		<a href="#22962" title="org.mybatis_scala.model.Author">author</a>.<a href="Author.scala.html#18060" title="=&gt; List[org.mybatis_scala.model.Book]">books</a>.<span title="(f: (org.mybatis_scala.model.Book) =&gt; Int)Unit">foreach</span> (<a title="org.mybatis_scala.model.Book" id="22994">b</a>=&gt; <a href="#22967" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)Int">insert</span> (<span title="java.lang.String(&quot;insertBook&quot;)" class="string">&quot;insertBook&quot;</span>,<a href="#22994" title="org.mybatis_scala.model.Book">b</a>))		
	}
	<span class="keyword">def</span> <a title="(id: Long)Option[org.mybatis_scala.model.AuthorRecord]" id="14707">loadAuthorById</a> (<a title="Long" id="23002">id</a>: <span title="Long">Long</span>) : <span title="Option[org.mybatis_scala.model.AuthorRecord]">Option</span>[AuthorRecord] = <a href="#14668" title="[T](myBatisId: String)(obj: Any)Option[T]">getOneOption</a><span title="(myBatisId: String)(obj: Any)Option[org.mybatis_scala.model.AuthorRecord]">[</span><a href="Author.scala.html#9133" title="org.mybatis_scala.model.AuthorRecord">AuthorRecord</a>] (<span title="java.lang.String(&quot;selectAuthorById&quot;)" class="string">&quot;selectAuthorById&quot;</span>) (<a href="#23002" title="Long">id</a>)
	<span class="keyword">def</span> <a title="(name: String)List[org.mybatis_scala.model.AuthorRecord]" id="14708">lazyLoadAuthorByFirstName</a> (<a title="String" id="23006">name</a>: <span title="String">String</span>) : <span title="List[org.mybatis_scala.model.AuthorRecord]">List</span>[AuthorRecord] = <a href="#14674" title="[T](myBatisId: String)(obj: Any)List[T]">getList</a><span title="(myBatisId: String)(obj: Any)List[org.mybatis_scala.model.AuthorRecord]">[</span><a href="Author.scala.html#9133" title="org.mybatis_scala.model.AuthorRecord">AuthorRecord</a>] (<span title="java.lang.String(&quot;lazySelectAuthorByFirstName&quot;)" class="string">&quot;lazySelectAuthorByFirstName&quot;</span>) (<a href="#23006" title="String">name</a>)	
	<span class="keyword">def</span> <a title="(author: org.mybatis_scala.model.Author)Unit" id="14709">updateAuthor</a> (<a title="org.mybatis_scala.model.Author" id="23010">author</a>: <a href="Author.scala.html#9134" title="org.mybatis_scala.model.Author">Author</a>) : <span title="Unit">Unit</span> = <a href="#14662" title="(operation: (org.apache.ibatis.session.SqlSession) =&gt; Unit)Unit">exec</a> { <a title="org.apache.ibatis.session.SqlSession" id="23015">s</a> =&gt;
		//update author record
		<a href="#23015" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)Int">update</span> (<span title="java.lang.String(&quot;updateAuthor&quot;)" class="string">&quot;updateAuthor&quot;</span>,<a href="#23010" title="org.mybatis_scala.model.Author">author</a>)
		
		// delete books that does't exists in the new author object
		<span class="keyword">val</span> <a title="scala.collection.mutable.Buffer[org.mybatis_scala.model.BookRecord]" id="23016">oldBooksBuffer</a> : <span title="scala.collection.mutable.Buffer[org.mybatis_scala.model.BookRecord]">Buffer</span>[BookRecord] = <a href="#23015" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)java.util.List[_]">selectList</span> (<span title="java.lang.String(&quot;selectBookByAuthor&quot;)" class="string">&quot;selectBookByAuthor&quot;</span>,<a href="#23010" title="org.mybatis_scala.model.Author">author</a>.<a href="Author.scala.html#18050" title="=&gt; Long">authorId</a>).<span title="[T0]T0">asInstanceOf</span><span title="(l: java.util.List[org.mybatis_scala.model.BookRecord])scala.collection.mutable.Buffer[org.mybatis_scala.model.BookRecord]">[</span>java.util.<span title="java.util.List[org.mybatis_scala.model.BookRecord]">List</span>[BookRecord]]			
		<span class="keyword">val</span> <a title="List[org.mybatis_scala.model.Book]" id="23017">oldBooks</a> = <a href="#23016" title="scala.collection.mutable.Buffer[org.mybatis_scala.model.BookRecord]">oldBooksBuffer</a>.<span title="=&gt; List[org.mybatis_scala.model.BookRecord]">toList</span>.<span title="(f: (org.mybatis_scala.model.BookRecord) =&gt; org.mybatis_scala.model.Book)(implicit bf: scala.collection.generic.CanBuildFrom[List[org.mybatis_scala.model.BookRecord],org.mybatis_scala.model.Book,List[org.mybatis_scala.model.Book]])List[org.mybatis_scala.model.Book]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,org.mybatis_scala.model.Book,List[org.mybatis_scala.model.Book]]">(</span><a title="org.mybatis_scala.model.BookRecord" id="23051">r</a> =&gt; <a href="Book.scala.html#18817" title="(bookRecord: org.mybatis_scala.model.BookRecord)org.mybatis_scala.model.Book">Book</a>(<a href="#23051" title="org.mybatis_scala.model.BookRecord">r</a>))	// convert from java List[BookRecord] to Scald List[Book]
		(<a href="#23017" title="List[org.mybatis_scala.model.Book]">oldBooks</a>.<span title="(f: (org.mybatis_scala.model.Book) =&gt; Long)(implicit bf: scala.collection.generic.CanBuildFrom[List[org.mybatis_scala.model.Book],Long,List[Long]])List[Long]">map</span> <span title="(that: List[Long])List[Long]">(</span> <a title="org.mybatis_scala.model.Book" id="23300">b</a> =&gt; <a href="#23300" title="org.mybatis_scala.model.Book">b</a>.<a href="Book.scala.html#18719" title="=&gt; Long">bookId</a>) -- (<a href="#23010" title="org.mybatis_scala.model.Author">author</a>.<a href="Author.scala.html#18060" title="=&gt; List[org.mybatis_scala.model.Book]">books</a>.<span title="(f: (org.mybatis_scala.model.Book) =&gt; Long)(implicit bf: scala.collection.generic.CanBuildFrom[List[org.mybatis_scala.model.Book],Long,List[Long]])List[Long]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Long,List[Long]]">(</span><a title="org.mybatis_scala.model.Book" id="23501">b</a> =&gt; <a href="#23501" title="org.mybatis_scala.model.Book">b</a>.<a href="Book.scala.html#18719" title="=&gt; Long">bookId</a>))).<span title="(f: (Long) =&gt; Int)Unit">foreach</span> ( <a title="Long" id="23709">b</a>=&gt; <a href="#23015" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)Int">delete</span> (<span title="java.lang.String(&quot;deleteBookById&quot;)" class="string">&quot;deleteBookById&quot;</span>,<a href="#23709" title="Long">b</a>))

		// insert books that does't exists in the old author object and update that do exists and has been changed
		<a href="#23010" title="org.mybatis_scala.model.Author">author</a>.<a href="Author.scala.html#18060" title="=&gt; List[org.mybatis_scala.model.Book]">books</a>.<span title="(p: (org.mybatis_scala.model.Book) =&gt; Boolean)(List[org.mybatis_scala.model.Book], List[org.mybatis_scala.model.Book])">partition</span> (<a title="org.mybatis_scala.model.Book" id="23717">e</a> =&gt; <a href="#23017" title="List[org.mybatis_scala.model.Book]">oldBooks</a>.<span title="(f: (org.mybatis_scala.model.Book) =&gt; Long)(implicit bf: scala.collection.generic.CanBuildFrom[List[org.mybatis_scala.model.Book],Long,List[Long]])List[Long]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Long,List[Long]]">(</span> <a title="org.mybatis_scala.model.Book" id="23730">b</a> =&gt; <a href="#23730" title="org.mybatis_scala.model.Book">b</a>.<a href="Book.scala.html#18719" title="=&gt; Long">bookId</a>).<span title="(p: (Long) =&gt; Boolean)Boolean">exists</span> (<a title="Long" id="23920">o</a> =&gt; <a href="#23920" title="(x$1: Long)Boolean">o</a> == <a href="#23717" title="org.mybatis_scala.model.Book">e</a>.<a href="Book.scala.html#18719" title="=&gt; Long">bookId</a>)) <span title="Unit" class="keyword">match</span> {
			<span title="Unit" class="keyword">case</span> (<a title="List[org.mybatis_scala.model.Book]" id="23930">updateList</a>, <a title="List[org.mybatis_scala.model.Book]" id="23931">insertList</a>) =&gt;
				<a href="#23931" title="List[org.mybatis_scala.model.Book]">insertList</a>.<span title="(f: (org.mybatis_scala.model.Book) =&gt; Int)Unit">foreach</span> {<a title="org.mybatis_scala.model.Book" id="23948">b</a> =&gt; 
					<a href="LogHelper.scala.html#14717" title="(msg: =&gt; String)Unit">lzDebug</a> (<span title="(x$1: Any)java.lang.String" class="string">&quot;to insert: &quot;</span>+<a href="#23948" title="org.mybatis_scala.model.Book">b</a>)
					<a href="#23015" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)Int">insert</span> (<span title="java.lang.String(&quot;insertBook&quot;)" class="string">&quot;insertBook&quot;</span>,<a href="#23948" title="org.mybatis_scala.model.Book">b</a>)
				}				
				// update only changed books
				(<a href="#23930" title="(that: List[org.mybatis_scala.model.Book])List[org.mybatis_scala.model.Book]">updateList</a> -- <a href="#23017" title="List[org.mybatis_scala.model.Book]">oldBooks</a>).<span title="(f: (org.mybatis_scala.model.Book) =&gt; Int)Unit">foreach</span> { <a title="org.mybatis_scala.model.Book" id="23981">b</a>=&gt; 
					<a href="LogHelper.scala.html#14717" title="(msg: =&gt; String)Unit">lzDebug</a> (<span title="(x$1: Any)java.lang.String" class="string">&quot;toUpdate: &quot;</span>+<a href="#23981" title="org.mybatis_scala.model.Book">b</a>)
					<a href="#23015" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)Int">update</span> (<span title="java.lang.String(&quot;updateBook&quot;)" class="string">&quot;updateBook&quot;</span>,<a href="#23981" title="org.mybatis_scala.model.Book">b</a>)
				}
		}						
	}
	<span class="keyword">def</span> <a title="(author: org.mybatis_scala.model.Author)Unit" id="14710">deleteCascadeAuthor</a> (<a title="org.mybatis_scala.model.Author" id="23991">author</a>: <a href="Author.scala.html#9134" title="org.mybatis_scala.model.Author">Author</a>) : <span title="Unit">Unit</span>	= <a href="#14662" title="(operation: (org.apache.ibatis.session.SqlSession) =&gt; Int)Int">exec</a> <span title="Unit">{</span> <a title="org.apache.ibatis.session.SqlSession" id="23996">s</a> =&gt;	
		<a href="#23996" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)Int">delete</span> (<span title="java.lang.String(&quot;deleteBookByAuthor&quot;)" class="string">&quot;deleteBookByAuthor&quot;</span>,<a href="#23991" title="org.mybatis_scala.model.Author">author</a>)
		<a href="#23996" title="org.apache.ibatis.session.SqlSession">s</a>.<span title="(x$1: java.lang.String,x$2: Any)Int">delete</span> (<span title="java.lang.String(&quot;deleteAuthor&quot;)" class="string">&quot;deleteAuthor&quot;</span>,<a href="#23991" title="org.mybatis_scala.model.Author">author</a>)
	}	
	<span class="keyword">def</span> <a title="(author: org.mybatis_scala.model.Author)Unit" id="14711">deleteAuthor</a> (<a title="org.mybatis_scala.model.Author" id="24005">author</a>: <a href="Author.scala.html#9134" title="org.mybatis_scala.model.Author">Author</a>) : <span title="Unit">Unit</span> = <a href="#14683" title="[T](myBatisId: String)(obj: T)Int">delete</a> <span title="(myBatisId: String)(obj: org.mybatis_scala.model.Author)Int">[</span><a href="Author.scala.html#9134" title="org.mybatis_scala.model.Author">Author</a>] (<span title="java.lang.String(&quot;deleteAuthor&quot;)" class="string">&quot;deleteAuthor&quot;</span>) <span title="Unit">(</span><a href="#24005" title="org.mybatis_scala.model.Author">author</a>)
}
        </pre>
    </body>
</html>