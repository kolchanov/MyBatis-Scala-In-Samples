<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>Schema.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.mybatis_scala.util

<span class="keyword">import</span> java.util.Properties
<span class="keyword">import</span> org.mybatis_scala.ApplicationContext
<span class="keyword">import</span> javax.sql._
<span class="keyword">import</span> java.sql._

/**
* Initial database shcema
*/
<span class="keyword">object</span> <a title="object org.mybatis_scala.util.Schema" id="9236">Schema</a> <span title="ScalaObject" class="keyword">extends</span> <a href="LogHelper.scala.html#9228" title="org.mybatis_scala.util.LogHelper">LogHelper</a> {
	<span class="keyword">val</span> <a title="java.util.Properties" id="26411">props</a> = <a href="ApplicationContext.scala.html#9120" title="object org.mybatis_scala.ApplicationContext">ApplicationContext</a>.<a href="ApplicationContext.scala.html#9246" title="=&gt; java.util.Properties">getProperties</a>
	
	<a href="LogHelper.scala.html#14717" title="(msg: =&gt; String)Unit">lzDebug</a> (<span title="java.lang.String(&quot;Schema object initialization&quot;)" class="string">&quot;Schema object initialization&quot;</span>)
	<a href="LogHelper.scala.html#14717" title="(msg: =&gt; String)Unit">lzDebug</a> (<span title="(x$1: Any)java.lang.String" class="string">&quot;database driver: &quot;</span>+<a href="#26411" title="=&gt; java.util.Properties">props</a>.<span title="(x$1: java.lang.String)java.lang.String">getProperty</span>(<span title="java.lang.String(&quot;driver&quot;)" class="string">&quot;driver&quot;</span>) )
	<a href="LogHelper.scala.html#14717" title="(msg: =&gt; String)Unit">lzDebug</a> (<span title="(x$1: Any)java.lang.String" class="string">&quot;database url: &quot;</span>+<a href="#26411" title="=&gt; java.util.Properties">props</a>.<span title="(x$1: java.lang.String)java.lang.String">getProperty</span>(<span title="java.lang.String(&quot;url&quot;)" class="string">&quot;url&quot;</span>) )	
	<a href="LogHelper.scala.html#14717" title="(msg: =&gt; String)Unit">lzDebug</a> (<span title="(x$1: Any)java.lang.String" class="string">&quot;database username: &quot;</span>+<a href="#26411" title="=&gt; java.util.Properties">props</a>.<span title="(x$1: java.lang.String)java.lang.String">getProperty</span>(<span title="java.lang.String(&quot;username&quot;)" class="string">&quot;username&quot;</span>) )	
	<a href="LogHelper.scala.html#14717" title="(msg: =&gt; String)Unit">lzDebug</a> (<span title="(x$1: Any)java.lang.String" class="string">&quot;database password: &quot;</span>+<a href="#26411" title="=&gt; java.util.Properties">props</a>.<span title="(x$1: java.lang.String)java.lang.String">getProperty</span>(<span title="java.lang.String(&quot;password&quot;)" class="string">&quot;password&quot;</span>) )		

	<span title="object java.lang.Class">Class</span>.<span title="(x$1: java.lang.String)java.lang.Class[_]">forName</span>(<a href="#26411" title="=&gt; java.util.Properties">props</a>.<span title="(x$1: java.lang.String)java.lang.String">getProperty</span>(<span title="java.lang.String(&quot;driver&quot;)" class="string">&quot;driver&quot;</span>))
	<span class="keyword">def</span> <a title="=&gt; java.sql.Connection" id="26413">conn</a> = <span title="object java.sql.DriverManager">DriverManager</span>.<span title="(x$1: java.lang.String,x$2: java.lang.String,x$3: java.lang.String)java.sql.Connection">getConnection</span> (<a href="#26411" title="=&gt; java.util.Properties">props</a>.<span title="(x$1: java.lang.String)java.lang.String">getProperty</span>(<span title="java.lang.String(&quot;url&quot;)" class="string">&quot;url&quot;</span>), <a href="#26411" title="=&gt; java.util.Properties">props</a>.<span title="(x$1: java.lang.String)java.lang.String">getProperty</span>(<span title="java.lang.String(&quot;username&quot;)" class="string">&quot;username&quot;</span>), <a href="#26411" title="=&gt; java.util.Properties">props</a>.<span title="(x$1: java.lang.String)java.lang.String">getProperty</span>(<span title="java.lang.String(&quot;password&quot;)" class="string">&quot;password&quot;</span>))		
	
	<a href="LogHelper.scala.html#14717" title="(msg: =&gt; String)Unit">lzDebug</a> (<span title="(x$1: Any)java.lang.String" class="string">&quot;connection &quot;</span>+<a href="#26413" title="=&gt; java.sql.Connection">conn</a>)
	
	<a href="#26414" title="()Unit">init</a>()
	
	<a href="LogHelper.scala.html#14717" title="(msg: =&gt; String)Unit">lzDebug</a> (<span title="java.lang.String(&quot;Schema object initialization completed&quot;)" class="string">&quot;Schema object initialization completed&quot;</span>)
	
	<span class="keyword">def</span> <a title="()Unit" id="26414">init</a> () {
		<span class="keyword">try</span> {
		
			<a href="#26413" title="=&gt; java.sql.Connection">conn</a>.<span title="()java.sql.Statement">createStatement</span>().<span title="(x$1: java.lang.String)Int">executeUpdate</span>(<span title="java.lang.String(&quot;CREATE SEQUENCE IF NOT EXISTS GENRE_SEQUENCE INCREMENT BY 10&quot;)" class="string">&quot;CREATE SEQUENCE IF NOT EXISTS GENRE_SEQUENCE INCREMENT BY 10&quot;</span>)			
			<a href="#26413" title="=&gt; java.sql.Connection">conn</a>.<span title="()java.sql.Statement">createStatement</span>().<span title="(x$1: java.lang.String)Int">executeUpdate</span>(<span title="java.lang.String(&quot;CREATE SEQUENCE IF NOT EXISTS BOOK_SEQUENCE INCREMENT BY 10&quot;)" class="string">&quot;CREATE SEQUENCE IF NOT EXISTS BOOK_SEQUENCE INCREMENT BY 10&quot;</span>)						
			<a href="#26413" title="=&gt; java.sql.Connection">conn</a>.<span title="()java.sql.Statement">createStatement</span>().<span title="(x$1: java.lang.String)Int">executeUpdate</span>(<span title="java.lang.String(&quot;CREATE SEQUENCE IF NOT EXISTS AUTHOR_SEQUENCE INCREMENT BY 10&quot;)" class="string">&quot;CREATE SEQUENCE IF NOT EXISTS AUTHOR_SEQUENCE INCREMENT BY 10&quot;</span>)						

			<a href="#26413" title="=&gt; java.sql.Connection">conn</a>.<span title="()java.sql.Statement">createStatement</span>().<span title="(x$1: java.lang.String)Int">executeUpdate</span>(<span title="java.lang.String(&quot;\012\011\011\011CREATE TABLE GENRE (\012\011\011\011\011GENRE_ID\011number primary key,\012\011\011\011\011NAME\011varchar(128) null\012\011\011\011)\012\011\011\011&quot;)" class="string">&quot;&quot;&quot;
			CREATE TABLE GENRE (
				GENRE_ID	number primary key,
				NAME	varchar(128) null
			)
			&quot;&quot;&quot;</span>)						

			<a href="#26413" title="=&gt; java.sql.Connection">conn</a>.<span title="()java.sql.Statement">createStatement</span>().<span title="(x$1: java.lang.String)Int">executeUpdate</span>(<span title="java.lang.String(&quot;\012\011\011\011CREATE TABLE BOOK (\012\011\011\011\011BOOK_ID \011number primary key,\012\011\011\011\011TITLE\011varchar (255) null,\012\011\011\011\011ISBN varchar (32) null,\011\011\011\011\012\011\011\011\011GENRE_ID number null,\012\011\011\011\011AUTHOR_ID number null\012\011\011\011)\012\011\011\011&quot;)" class="string">&quot;&quot;&quot;
			CREATE TABLE BOOK (
				BOOK_ID 	number primary key,
				TITLE	varchar (255) null,
				ISBN varchar (32) null,				
				GENRE_ID number null,
				AUTHOR_ID number null
			)
			&quot;&quot;&quot;</span>)						

			<a href="#26413" title="=&gt; java.sql.Connection">conn</a>.<span title="()java.sql.Statement">createStatement</span>().<span title="(x$1: java.lang.String)Int">executeUpdate</span>(<span title="java.lang.String(&quot;\012\011\011\011CREATE TABLE AUTHOR (\012\011\011\011\011AUTHOR_ID number primary key,\012\011\011\011\011BIRTH_DAY\011DATETIME null,\012\011\011\011\011FIRST_NAME varchar (255) null,\011\011\011\011\012\011\011\011\011LAST_NAME varchar (255) null,\012\011\011\011\011ANNOTATION varchar(1024) null\012\011\011\011)\012\011\011\011&quot;)" class="string">&quot;&quot;&quot;
			CREATE TABLE AUTHOR (
				AUTHOR_ID number primary key,
				BIRTH_DAY	DATETIME null,
				FIRST_NAME varchar (255) null,				
				LAST_NAME varchar (255) null,
				ANNOTATION varchar(1024) null
			)
			&quot;&quot;&quot;</span>)						
				
			<a href="#26413" title="=&gt; java.sql.Connection">conn</a>.<span title="()java.sql.Statement">createStatement</span>().<span title="(x$1: java.lang.String)Int">executeUpdate</span>(<span title="java.lang.String(&quot;ALTER TABLE BOOK ADD CONSTRAINT BOOK_GENRE_REF FOREIGN KEY (GENRE_ID) REFERENCES GENRE (GENRE_ID)&quot;)" class="string">&quot;ALTER TABLE BOOK ADD CONSTRAINT BOOK_GENRE_REF FOREIGN KEY (GENRE_ID) REFERENCES GENRE (GENRE_ID)&quot;</span>)
			<a href="#26413" title="=&gt; java.sql.Connection">conn</a>.<span title="()java.sql.Statement">createStatement</span>().<span title="(x$1: java.lang.String)Int">executeUpdate</span><span title="Unit">(</span><span title="java.lang.String(&quot;ALTER TABLE BOOK ADD CONSTRAINT BOOK_AUTHOR_REF FOREIGN KEY (AUTHOR_ID) REFERENCES AUTHOR (AUTHOR_ID)&quot;)" class="string">&quot;ALTER TABLE BOOK ADD CONSTRAINT BOOK_AUTHOR_REF FOREIGN KEY (AUTHOR_ID) REFERENCES AUTHOR (AUTHOR_ID)&quot;</span>)			
			
		} <span class="keyword">finally</span> {
			<a href="#26413" title="=&gt; java.sql.Connection">conn</a>.<span title="()Unit">close</span>()
		}
	}
}

        </pre>
    </body>
</html>